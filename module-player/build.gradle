//apply plugin: 'com.android.library'
apply plugin: 'com.gfd.comswitch'

apply from: rootProject.file('libbase.gradle')
apply from: rootProject.file('libclean.gradle')

kapt {
    arguments {
        arg("AROUTER_MODULE_NAME", project.getName())
        arg("room.schemaLocation", "$projectDir/schemas".toString())
    }
}

android {
//    resourcePrefix "player_"
    defaultConfig {
        vectorDrawables.useSupportLibrary = true
    }
    packagingOptions {
        pickFirst 'lib/armeabi-v7a/libc++_shared.so'
        pickFirst 'lib/armeabi-v8a/libc++_shared.so'
        pickFirst 'lib/arm64-v8a/libc++_shared.so'
        pickFirst 'lib/x86/libc++_shared.so'
        pickFirst 'lib/x86_64/libc++_shared.so'
    }
}

this.beforeEvaluate {
    println 'Player开始执行了'
    delete buildDir
}

dependencies {
    implementation project(':common')

    kapt dependence.libArouterCompiler
    kapt dependence.libRoomCompiler
    // AppCompat
    implementation "androidx.lifecycle:lifecycle-service:2.2.0"
    implementation "com.google.android.material:material:1.2.0-alpha05"
    // ExoPlayer
    implementation 'com.google.android.exoplayer:exoplayer:2.11.1'
    implementation 'com.google.android.exoplayer:extension-leanback:2.11.1'
    implementation 'com.google.android.exoplayer:extension-okhttp:2.11.1'
//    implementation project(':libs:exoplayer_ffmpeg') // only armv7a
    // IjkPlayer
    implementation dependence.libIjkplayer
    implementation dependence.libIjkplayer_armv7a
    implementation dependence.libIjkplayer_x86
    implementation dependence.libIjkplayer_x86_64
    // 弹幕
    implementation project(':libs:tool-danma')
    // 字幕
    implementation project(':libs:tool-subtitle')
    // VLC
    implementation "org.videolan.android:medialibrary-all:0.7.0-eap03"
    implementation "org.videolan.android:libvlc-all:3.3.0-eap02"
}